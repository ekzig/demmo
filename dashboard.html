<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demmo — My Assignments</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.typekit.net/zaw6kbv.css">
    <style>
        :root {
            --bg-primary: #080808;
            --bg-secondary: #0c0c0c;
            --bg-tertiary: #111111;
            --bg-hover: #161616;
            --border: rgba(255, 255, 255, 0.06);
            --border-hover: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.55);
            --text-tertiary: rgba(255, 255, 255, 0.3);
            --pink: #e7a2c8;
            --pink-light: #ffd1e6;
            --pink-glow: rgba(231, 162, 200, 0.12);
            --pink-border: rgba(231, 162, 200, 0.2);
            --mint: #6ee7b7;
            --mint-glow: rgba(110, 231, 183, 0.12);
            --mint-border: rgba(110, 231, 183, 0.25);
            --peach: #fca5a5;
            --peach-glow: rgba(252, 165, 165, 0.12);
            --peach-border: rgba(252, 165, 165, 0.25);
            --gold: #fcd34d;
            --gold-glow: rgba(252, 211, 77, 0.12);
            --gold-border: rgba(252, 211, 77, 0.25);
            --sky: #7dd3fc;
            --sky-glow: rgba(125, 211, 252, 0.12);
            --sky-border: rgba(125, 211, 252, 0.25);
            --lavender: #c4b5fd;
            --lavender-glow: rgba(196, 181, 253, 0.12);
            --lavender-border: rgba(196, 181, 253, 0.25);
            --sidebar-width: 252px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter Tight', sans-serif;
            font-weight: 400;
            background: var(--bg-primary);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            overflow: hidden;
            height: 100vh;
        }

        .mono { font-family: 'JetBrains Mono', monospace; }

        /* ===== LAYOUT ===== */
        .app-wrapper {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .app-layout {
            display: flex;
            flex: 1;
            min-height: 0;
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        .sidebar-header {
            height: 63px;
            padding: 0 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
            flex-shrink: 0;
        }

        .sidebar-logo {
            height: 22px;
            opacity: 0.9;
        }

        .sidebar-badge {
            font-family: 'Inter Tight', sans-serif;
            font-size: 11px;
            font-weight: 500;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            padding: 5px 10px;
            border-radius: 20px;
            background: rgba(231, 162, 200, 0.08);
            color: var(--pink);
            border: 1px solid rgba(231, 162, 200, 0.15);
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        /* Imprint selector */
        .imprint-selector {
            padding: 8px 10px;
            border-bottom: 1px solid var(--border);
            position: relative;
            flex-shrink: 0;
        }

        .imprint-selector-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 6px;
            padding: 7px 10px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .imprint-selector-btn:hover {
            border-color: var(--border-hover);
            background: var(--bg-hover);
        }

        .imprint-current {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .imprint-dropdown {
            display: none;
            position: absolute;
            top: calc(100% + 2px);
            left: 10px;
            right: 10px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-hover);
            border-radius: 10px;
            padding: 4px;
            z-index: 100;
            box-shadow: 0 8px 24px rgba(0,0,0,0.5);
        }

        .imprint-dropdown.open {
            display: block;
        }

        .imprint-option {
            padding: 7px 10px;
            border-radius: 6px;
            font-size: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.1s ease;
        }

        .imprint-option:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .imprint-option.active {
            color: var(--pink);
            background: var(--pink-glow);
        }

        .sidebar-nav {
            flex: 1;
            padding: 12px 8px;
            overflow-y: auto;
        }

        .nav-section-label {
            font-size: 9px;
            font-weight: 500;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--text-tertiary);
            padding: 16px 12px 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 9px 12px;
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.15s ease;
            font-size: 13px;
            font-weight: 400;
            position: relative;
        }

        .nav-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: var(--pink-glow);
            color: var(--pink-light);
        }

        .nav-item.active svg {
            color: var(--pink);
        }

        .nav-item svg {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
            opacity: 0.6;
        }

        .nav-item.active svg {
            opacity: 1;
        }

        .nav-count {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            font-weight: 500;
            margin-left: auto;
            min-width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            background: var(--pink-glow);
            color: var(--pink);
            border: 1px solid var(--pink-border);
        }

        .nav-count:empty {
            display: none;
        }

        .user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--pink-glow), var(--lavender-glow));
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 600;
            color: var(--pink);
            flex-shrink: 0;
        }

        .user-info {
            min-width: 0;
        }

        .user-name {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .user-role {
            font-size: 10px;
            color: var(--text-tertiary);
            line-height: 1.2;
        }

        .top-bar-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .top-bar-user {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 10px 6px 6px;
            border-radius: 10px;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .top-bar-user:hover {
            background: var(--bg-hover);
            border-color: var(--border-hover);
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* ===== TOP BAR ===== */
        .top-bar {
            height: 63px;
            padding: 0 28px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
        }

        .page-header {
            display: flex;
            align-items: baseline;
            gap: 12px;
        }

        .page-title {
            font-size: 20px;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .page-count {
            font-size: 11px;
            color: var(--text-tertiary);
        }

        .filter-tabs {
            display: flex;
            gap: 4px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 3px;
            border: 1px solid var(--border);
        }

        .filter-tab {
            padding: 6px 14px;
            border-radius: 7px;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.15s ease;
            border: none;
            background: none;
        }

        .filter-tab:hover {
            color: var(--text-primary);
        }

        .filter-tab.active {
            background: var(--bg-hover);
            color: var(--text-primary);
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        /* ===== NOW PLAYING BAR ===== */
        .now-playing-bar {
            padding: 0 20px;
            height: 72px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 16px;
            flex-shrink: 0;
        }

        /* LEFT: track info */
        .np-left {
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 0;
        }

        .np-artwork {
            width: 44px;
            height: 44px;
            border-radius: 6px;
            overflow: hidden;
            flex-shrink: 0;
            border: 1px solid var(--border);
        }

        .np-artwork img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .np-details {
            min-width: 0;
        }

        .np-track {
            font-size: 13px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .np-artist {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 1px;
        }

        /* CENTER: controls row + progress row */
        .np-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            width: 480px;
        }

        .np-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .np-btn {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.15s ease;
        }

        .np-btn:hover {
            color: var(--text-primary);
        }

        .np-btn svg {
            width: 20px;
            height: 20px;
        }

        .np-btn.play-pause {
            width: 40px;
            height: 40px;
            background: #fff;
            color: #0a0a0f;
            border-radius: 50%;
            margin: 0 6px;
            flex-shrink: 0;
        }

        .np-btn.play-pause:hover {
            transform: scale(1.06);
            background: #f0f0f0;
        }

        .np-btn.play-pause svg {
            width: 20px;
            height: 20px;
        }

        .np-progress {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .np-time {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            color: var(--text-tertiary);
            min-width: 28px;
            text-align: center;
            flex-shrink: 0;
        }

        .progress-track {
            flex: 1;
            height: 32px;
            cursor: pointer;
            position: relative;
        }

        .progress-track canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* RIGHT: volume + shortcuts */
        .np-right {
            display: flex;
            align-items: center;
            gap: 16px;
            justify-content: flex-end;
        }

        .np-volume {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .volume-track {
            width: 80px;
            height: 3px;
            background: rgba(255,255,255,0.06);
            border-radius: 2px;
            overflow: hidden;
            cursor: pointer;
        }

        .volume-fill {
            width: 70%;
            height: 100%;
            background: var(--pink);
            border-radius: 2px;
        }

        /* ===== NOW PLAYING HERO ===== */
        .np-hero {
            display: none;
            border-bottom: 1px solid var(--border);
            background: var(--bg-secondary);
            flex-shrink: 0;
            overflow: hidden;
            transition: all 0.25s ease;
        }

        .np-hero.visible {
            display: block;
        }

        .np-hero-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px 28px;
        }

        .np-hero-artwork {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            overflow: hidden;
            flex-shrink: 0;
            box-shadow: 0 4px 16px rgba(0,0,0,0.4);
        }

        .np-hero-artwork img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .np-hero-content {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        .np-hero-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .np-hero-track {
            font-size: 18px;
            font-weight: 600;
            letter-spacing: -0.02em;
            color: var(--text-primary);
        }

        .np-hero-artist {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .np-hero-waveform {
            height: 64px;
            cursor: pointer;
        }

        .np-hero-waveform canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* ===== TRACK LIST ===== */
        .track-list-container {
            flex: 1;
            overflow-y: auto;
            padding: 0;
        }

        .track-list-header {
            display: grid;
            grid-template-columns: 1fr 110px 100px 110px 100px 160px;
            gap: 12px;
            align-items: center;
            padding: 10px 28px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            background: var(--bg-primary);
            z-index: 5;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .col-header {
            font-size: 9px;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--text-tertiary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            user-select: none;
        }

        .col-header:hover {
            color: var(--text-secondary);
        }

        .col-header svg {
            width: 10px;
            height: 10px;
            opacity: 0.4;
        }

        /* ===== TRACK ROW ===== */
        .track-row {
            display: grid;
            grid-template-columns: 1fr 110px 100px 110px 100px 160px;
            gap: 12px;
            align-items: center;
            padding: 12px 28px;
            border-bottom: 1px solid rgba(255,255,255,0.02);
            cursor: pointer;
            transition: all 0.15s ease;
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .track-row::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 28px;
            right: 28px;
            height: 1px;
            background: var(--border);
        }

        .track-row:hover {
            background: var(--bg-hover);
        }

        .track-row.playing {
            background: var(--pink-glow);
        }

        .track-row.playing::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--pink);
            border-radius: 0 2px 2px 0;
        }

        /* Play button — overlaid on artwork */
        .track-play-btn {
            position: absolute;
            inset: 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            background: rgba(0,0,0,0.55);
            color: #fff;
            cursor: pointer;
            transition: opacity 0.15s ease;
            opacity: 0;
            flex-shrink: 0;
        }

        .track-row:hover .track-play-btn {
            opacity: 1;
        }

        .track-play-btn svg {
            width: 16px;
            height: 16px;
            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.6));
        }

        .track-play-btn .play-icon { margin-left: 2px; }
        .track-play-btn .pause-icon { display: none; }
        .track-play-btn .playing-anim { display: none; }

        /* When playing: show anim overlay always, hide play/pause icons */
        .track-row.playing .track-play-btn {
            opacity: 1;
            background: rgba(0,0,0,0.5);
        }
        .track-row.playing .track-play-btn .play-icon { display: none; }
        .track-row.playing .track-play-btn .playing-anim { display: flex; align-items: flex-end; gap: 2px; height: 16px; }

        /* On hover while playing — show pause icon instead */
        .track-row.playing:hover .track-play-btn .playing-anim { display: none; }
        .track-row.playing:hover .track-play-btn .pause-icon { display: block; }

        /* Playing waveform bars inside artwork overlay */
        .playing-anim span {
            width: 2px;
            background: var(--pink);
            border-radius: 1px;
            animation: waveformRow 0.8s ease-in-out infinite;
        }
        .playing-anim span:nth-child(1) { animation-delay: 0s; }
        .playing-anim span:nth-child(2) { animation-delay: 0.15s; }
        .playing-anim span:nth-child(3) { animation-delay: 0.3s; }
        .playing-anim span:nth-child(4) { animation-delay: 0.1s; }

        @keyframes waveformRow {
            0%, 100% { height: 4px; opacity: 0.5; }
            50% { height: 14px; opacity: 1; }
        }

        /* Artist + Track info */
        .track-info {
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 0;
        }

        .track-artwork {
            position: relative;
            width: 42px;
            height: 42px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0;
            border: 1px solid var(--border);
        }

        .track-artwork img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .track-text {
            min-width: 0;
        }

        .track-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 2px;
        }

        .track-artist-name {
            font-size: 12px;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: pointer;
        }

        .track-artist-name:hover {
            color: var(--pink);
            text-decoration: underline;
        }

        /* Popularity cell */
        .track-popularity {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .popularity-count {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-primary);
            letter-spacing: -0.01em;
        }

        .popularity-bar-track {
            width: 100%;
            height: 2px;
            background: rgba(255,255,255,0.06);
            border-radius: 1px;
            overflow: hidden;
        }

        .popularity-bar-fill {
            height: 100%;
            border-radius: 1px;
            transition: width 0.3s ease;
        }

        /* Genre tag */
        .genre-tag {
            font-size: 10px;
            font-weight: 500;
            padding: 4px 10px;
            border-radius: 6px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            width: fit-content;
        }

        .genre-electronic {
            background: var(--lavender-glow);
            color: var(--lavender);
            border: 1px solid var(--lavender-border);
        }

        .genre-indie {
            background: var(--gold-glow);
            color: var(--gold);
            border: 1px solid var(--gold-border);
        }

        .genre-pop {
            background: var(--pink-glow);
            color: var(--pink);
            border: 1px solid var(--pink-border);
        }

        .genre-hiphop {
            background: var(--sky-glow);
            color: var(--sky);
            border: 1px solid var(--sky-border);
        }

        .genre-rnb {
            background: var(--peach-glow);
            color: var(--peach);
            border: 1px solid var(--peach-border);
        }

        /* Imprint */
        .track-imprint {
            font-size: 11px;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Date */
        .track-date {
            font-size: 11px;
            color: var(--text-tertiary);
        }

        /* Quick actions */
        .track-actions {
            display: flex;
            align-items: center;
            gap: 6px;
            justify-content: flex-end;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.15s ease;
        }

        .track-row:hover .track-actions,
        .track-row.focused .track-actions,
        .track-row.playing .track-actions {
            opacity: 1;
            pointer-events: auto;
        }

        .action-btn {
            height: 30px;
            padding: 0 12px;
            border-radius: 7px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.15s ease;
            font-size: 11px;
            font-weight: 500;
            border: 1px solid;
        }

        .action-btn svg {
            width: 12px;
            height: 12px;
        }

        .action-btn.decline {
            background: var(--peach-glow);
            border-color: var(--peach-border);
            color: var(--peach);
        }

        .action-btn.decline:hover {
            background: rgba(252, 165, 165, 0.2);
        }

        .action-btn.shortlist {
            background: var(--gold-glow);
            border-color: var(--gold-border);
            color: var(--gold);
        }

        .action-btn.shortlist:hover {
            background: rgba(252, 211, 77, 0.2);
        }

        .action-btn.accept {
            background: var(--mint-glow);
            border-color: var(--mint-border);
            color: var(--mint);
        }

        .action-btn.accept:hover {
            background: rgba(110, 231, 183, 0.2);
        }

        /* Keyboard shortcut hint on action buttons */
        .action-btn .kbd {
            font-family: 'JetBrains Mono', monospace;
            font-size: 9px;
            opacity: 0.5;
            margin-left: 2px;
        }

        /* ===== EMPTY STATE ===== */
        .empty-state {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 80px 40px;
            text-align: center;
        }

        .empty-state.visible {
            display: flex;
        }

        .empty-icon {
            width: 64px;
            height: 64px;
            border-radius: 20px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .empty-icon svg {
            width: 28px;
            height: 28px;
            color: var(--text-tertiary);
        }

        .empty-title {
            font-size: 16px;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .empty-desc {
            font-size: 13px;
            color: var(--text-tertiary);
            max-width: 360px;
            line-height: 1.6;
        }

        /* ===== KEYBOARD SHORTCUT BAR ===== */
        .np-shortcuts {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-left: auto;
            border-left: 1px solid var(--border);
            padding-left: 16px;
        }

        /* ===== NOW-PLAYING ACTION STRIP ===== */
        .np-actions {
            display: none;
            align-items: center;
            gap: 6px;
            margin-left: auto;
            border-left: 1px solid var(--border);
            padding-left: 16px;
        }

        .np-action-btn {
            height: 28px;
            padding: 0 10px;
            border-radius: 7px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 11px;
            font-weight: 500;
            border: 1px solid;
            cursor: pointer;
            transition: background 0.15s ease;
            white-space: nowrap;
        }

        .np-action-btn svg {
            width: 11px;
            height: 11px;
            flex-shrink: 0;
        }

        .np-decline  { background: var(--peach-glow); border-color: var(--peach-border); color: var(--peach); }
        .np-decline:hover  { background: rgba(252,165,165,0.2); }
        .np-shortlist{ background: var(--gold-glow);  border-color: var(--gold-border);  color: var(--gold);  }
        .np-shortlist:hover{ background: rgba(252,211,77,0.2);  }
        .np-accept   { background: var(--mint-glow);  border-color: var(--mint-border);  color: var(--mint);  }
        .np-accept:hover   { background: rgba(110,231,183,0.2); }

        .shortcut-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 10px;
            color: var(--text-tertiary);
            white-space: nowrap;
        }

        .shortcut-key {
            font-family: 'JetBrains Mono', monospace;
            font-size: 9px;
            font-weight: 500;
            padding: 1px 5px;
            border-radius: 3px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.08);
            color: var(--text-secondary);
        }

        /* ===== TOAST NOTIFICATION ===== */
        .toast {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 500;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 100;
            pointer-events: none;
        }

        .toast.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .toast.decline {
            background: var(--peach-glow);
            border: 1px solid var(--peach-border);
            color: var(--peach);
        }

        .toast.shortlist {
            background: var(--gold-glow);
            border: 1px solid var(--gold-border);
            color: var(--gold);
        }

        .toast.accept {
            background: var(--mint-glow);
            border: 1px solid var(--mint-border);
            color: var(--mint);
        }

        /* ===== FOCUS RING FOR SELECTED ROW ===== */
        .track-row.focused {
            outline: 1px solid var(--pink-border);
            outline-offset: -1px;
            background: rgba(231, 162, 200, 0.04);
        }

        /* Scrollbar styling */
        .track-list-container::-webkit-scrollbar {
            width: 6px;
        }
        .track-list-container::-webkit-scrollbar-track {
            background: transparent;
        }
        .track-list-container::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.08);
            border-radius: 3px;
        }
        .track-list-container::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.15);
        }

        .sidebar-nav::-webkit-scrollbar {
            width: 4px;
        }
        .sidebar-nav::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.06);
            border-radius: 2px;
        }

        .sidebar-bottom {
            padding: 10px 8px 14px;
            border-top: 1px solid var(--border);
            flex-shrink: 0;
        }

        .share-link-btn {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 9px;
            padding: 9px 12px;
            border-radius: 8px;
            border: 1px solid var(--pink-border);
            background: var(--pink-glow);
            color: var(--pink);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.15s ease, border-color 0.15s ease;
        }

        .share-link-btn:hover {
            background: rgba(231, 162, 200, 0.14);
            border-color: rgba(231, 162, 200, 0.35);
        }

        .share-link-btn svg {
            width: 15px;
            height: 15px;
            flex-shrink: 0;
        }

        /* Artist popup */
        .artist-popup {
            position: fixed;
            background: var(--bg-secondary);
            border: 1px solid var(--border-hover);
            border-radius: 14px;
            padding: 20px;
            width: 280px;
            z-index: 200;
            box-shadow: 0 16px 48px rgba(0,0,0,0.5);
            display: none;
        }

        .artist-popup.visible {
            display: block;
        }

        .artist-popup-close {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 22px;
            height: 22px;
            border-radius: 5px;
            border: none;
            background: transparent;
            color: var(--text-tertiary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.15s ease, background 0.15s ease;
        }

        .artist-popup-close:hover {
            color: var(--text-primary);
            background: rgba(255,255,255,0.06);
        }

        .artist-popup-close svg {
            width: 13px;
            height: 13px;
        }

        .artist-popup-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 14px;
        }

        .artist-popup-header-text {
            flex: 1;
            min-width: 0;
        }

        .artist-msg-btn {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            border-radius: 7px;
            border: 1px solid var(--pink-border);
            background: var(--pink-glow);
            color: var(--pink);
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            flex-shrink: 0;
            transition: background 0.15s ease;
        }

        .artist-msg-btn:hover { background: rgba(231,162,200,0.22); }

        .artist-msg-btn svg {
            width: 12px;
            height: 12px;
        }

        .artist-socials {
            display: flex;
            align-items: center;
            gap: 7px;
            margin-bottom: 14px;
            padding-bottom: 14px;
            border-bottom: 1px solid var(--border);
        }

        .social-link {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            transition: all 0.15s ease;
            text-decoration: none;
            flex-shrink: 0;
        }

        .social-link svg { width: 14px; height: 14px; }

        .social-spotify:hover    { color: #1DB954; border-color: rgba(29,185,84,0.35);  background: rgba(29,185,84,0.08); }
        .social-instagram:hover  { color: #E1306C; border-color: rgba(225,48,108,0.35); background: rgba(225,48,108,0.08); }
        .social-youtube:hover    { color: #FF0000; border-color: rgba(255,0,0,0.35);    background: rgba(255,0,0,0.08); }
        .social-soundcloud:hover { color: #FF5500; border-color: rgba(255,85,0,0.35);   background: rgba(255,85,0,0.08); }

        .artist-popup-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .artist-popup-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .artist-popup-name {
            font-size: 15px;
            font-weight: 600;
        }

        .artist-popup-genre {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .artist-popup-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .artist-stat {
            padding: 8px 10px;
            background: var(--bg-tertiary);
            border-radius: 8px;
        }

        .artist-stat-value {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .artist-stat-label {
            font-size: 10px;
            color: var(--text-tertiary);
            margin-top: 2px;
        }




        /* Confirm modal */
        .confirm-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 300;
        }

        .confirm-overlay.visible {
            display: flex;
        }

        .confirm-modal {
            background: var(--bg-secondary);
            border: 1px solid var(--border-hover);
            border-radius: 16px;
            padding: 28px;
            width: 340px;
            text-align: center;
        }

        .confirm-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .confirm-desc {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .confirm-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .confirm-btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s ease;
            border: 1px solid;
            display: inline-flex;
            align-items: center;
            gap: 9px;
        }

        .confirm-kbd {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            font-weight: 400;
            padding: 2px 5px;
            border-radius: 4px;
            opacity: 0.55;
            border: 1px solid currentColor;
            line-height: 1.4;
            letter-spacing: 0;
        }

        .confirm-btn.cancel {
            background: var(--bg-tertiary);
            border-color: var(--border);
            color: var(--text-secondary);
        }

        .confirm-btn.cancel:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .confirm-btn.confirm-decline {
            background: var(--peach-glow);
            border-color: var(--peach-border);
            color: var(--peach);
        }

        .confirm-btn.confirm-accept {
            background: var(--mint-glow);
            border-color: var(--mint-border);
            color: var(--mint);
        }
    </style>
</head>
<body>
    <div class="app-wrapper">
    <div class="app-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="demmo-logo-2026-v2.svg" alt="demmo" class="sidebar-logo">
                <span class="sidebar-badge">FOR LABELS</span>
            </div>
            <div class="imprint-selector" id="imprintSelector">
                <button class="imprint-selector-btn" id="imprintBtn">
                    <span class="imprint-current" id="imprintCurrent">Enhanced Music</span>
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width:12px;height:12px;opacity:0.5;flex-shrink:0"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                </button>
                <div class="imprint-dropdown" id="imprintDropdown">
                    <div class="imprint-option active" data-imprint="all">All Imprints</div>
                    <div class="imprint-option" data-imprint="colorize">Colorize</div>
                    <div class="imprint-option" data-imprint="enhanced-chill">Enhanced Chill</div>
                    <div class="imprint-option" data-imprint="enhanced-progressive">Enhanced Progressive</div>
                    <div class="imprint-option" data-imprint="enhanced-recordings">Enhanced Recordings</div>
                    <div class="imprint-option" data-imprint="shapes-of-solitude">Shapes of Solitude</div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section-label">Overview</div>
                <div class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"/></svg>
                    Dashboard
                </div>
                <div class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"/></svg>
                    Onboarding
                </div>

                <div class="nav-section-label">Submissions</div>
                <div class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"/></svg>
                    Queue
                </div>
                <div class="nav-item active">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H6.911a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z"/></svg>
                    My Assignments
                    <span class="nav-count" id="navCountAssign">7</span>
                </div>
                <div class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>
                    Shortlisted
                    <span class="nav-count" id="navCountShort"></span>
                </div>
                <div class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    Accepted
                    <span class="nav-count" id="navCountAccept"></span>
                </div>
                <div class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"/></svg>
                    All Submissions
                </div>

                <div class="nav-section-label">Label</div>
                <div class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"/></svg>
                    Artists
                </div>
                <div class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"/></svg>
                    Team
                </div>
                <div class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"/></svg>
                    Conversations
                </div>
                <div class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                    Settings
                </div>
                <button class="share-link-btn" style="margin-top: 20px;">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/></svg>
                    Share submission link
                </button>
            </nav>

        </aside>

        <!-- Main -->
        <main class="main-content">
            <!-- Top bar -->
            <div class="top-bar">
                <div class="page-header">
                    <h1 class="page-title">My Assignments</h1>
                    <span class="page-count mono" id="pageCount">7 new</span>
                </div>
                <div class="top-bar-right">
                    <div class="filter-tabs">
                        <button class="filter-tab active" data-filter="new">New</button>
                        <button class="filter-tab" data-filter="shortlisted">Shortlisted</button>
                        <button class="filter-tab" data-filter="accepted">Accepted</button>
                        <button class="filter-tab" data-filter="declined">Declined</button>
                    </div>
                    <div class="top-bar-user">
                        <div class="user-avatar">AB</div>
                        <div class="user-info">
                            <div class="user-name">Drake</div>
                            <div class="user-role">A&R Manager</div>
                        </div>
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width:14px;height:14px;color:var(--text-tertiary);flex-shrink:0"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                    </div>
                </div>
            </div>

            <!-- Now Playing Hero -->
            <div class="np-hero" id="npHero">
                <div class="np-hero-inner">
                    <div class="np-hero-artwork">
                        <img id="npHeroArt" src="Avatars/demmo-avatar-x1.webp" alt="">
                    </div>
                    <div class="np-hero-content">
                        <div class="np-hero-text">
                            <div class="np-hero-track" id="npHeroTrack">Track Name</div>
                            <div class="np-hero-artist" id="npHeroArtist">Artist Name</div>
                        </div>
                        <div class="np-hero-waveform" id="npHeroWaveform"></div>
                    </div>
                </div>
            </div>

            <!-- Track list -->
            <div class="track-list-header">
                <div class="col-header">
                    Artist / Track
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                </div>
                <div class="col-header">Popularity</div>
                <div class="col-header">Genre</div>
                <div class="col-header">Imprint</div>
                <div class="col-header">
                    Submitted
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/></svg>
                </div>
                <div class="col-header" style="justify-content: flex-end;">Actions</div>
            </div>

            <div class="track-list-container" id="trackList">
                <!-- Track rows will be populated by JS -->
            </div>

            <!-- Empty state (shown when no tracks) -->
            <div class="empty-state" id="emptyState">
                <div class="empty-icon">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"/></svg>
                </div>
                <div class="empty-title">No demos to review right now</div>
                <div class="empty-desc">New submissions will appear here automatically. Share your submission link with artists to start receiving demos.</div>
            </div>

        </main>
    </div>

    <!-- Now Playing (bottom bar — full width, Spotify 3-column layout) -->
    <div class="now-playing-bar" id="nowPlayingBar">
        <!-- LEFT: track info -->
        <div class="np-left" id="npInfo">
            <div class="np-artwork" id="npArtwork">
                <img src="Avatars/demmo-avatar-x1.webp" alt="">
            </div>
            <div class="np-details">
                <div class="np-track" id="npTrack">Midnight Drive</div>
                <div class="np-artist" id="npArtist">Luna Ray</div>
            </div>
        </div>

        <!-- CENTER: controls + progress -->
        <div class="np-center">
            <div class="np-controls">
                <button class="np-btn" title="Previous" id="npPrev">
                    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"/></svg>
                </button>
                <button class="np-btn play-pause" id="npPlayPause">
                    <svg class="play-icon" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    <svg class="pause-icon" fill="currentColor" viewBox="0 0 24 24" style="display:none"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/></svg>
                </button>
                <button class="np-btn" title="Next" id="npNext">
                    <svg fill="currentColor" viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zM16 6h2v12h-2z"/></svg>
                </button>
            </div>
            <div class="np-progress">
                <span class="np-time np-time-current mono">0:00</span>
                <div class="progress-track" id="progressTrack"></div>
                <span class="np-time np-time-total mono">0:00</span>
            </div>
        </div>

        <!-- RIGHT: volume, shortcuts / actions -->
        <div class="np-right">
            <div class="np-volume">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width:14px;height:14px;color:var(--text-secondary)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/></svg>
                <div class="volume-track" id="volumeTrack">
                    <div class="volume-fill" id="volumeFill"></div>
                </div>
            </div>
            <div class="np-shortcuts" id="npShortcuts">
                <span class="shortcut-item"><span class="shortcut-key">Space</span> Play</span>
                <span class="shortcut-item"><span class="shortcut-key">&uarr;</span><span class="shortcut-key">&darr;</span> Nav</span>
                <span class="shortcut-item"><span class="shortcut-key">&larr;</span><span class="shortcut-key">&rarr;</span> ±15s</span>
                <span class="shortcut-item"><span class="shortcut-key">D</span> <span class="shortcut-key">S</span> <span class="shortcut-key">A</span> Actions</span>
            </div>
            <div class="np-actions" id="npActions">
                <button class="np-action-btn np-decline" id="npDecline" title="Decline (D)">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                    Decline <span class="confirm-kbd">D</span>
                </button>
                <button class="np-action-btn np-shortlist" id="npShortlist" title="Shortlist (S)">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>
                    Shortlist <span class="confirm-kbd">S</span>
                </button>
                <button class="np-action-btn np-accept" id="npAccept" title="Accept (A)">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    Accept <span class="confirm-kbd">A</span>
                </button>
            </div>
        </div>
    </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- Confirm modal -->
    <div class="confirm-overlay" id="confirmOverlay">
        <div class="confirm-modal">
            <div class="confirm-title" id="confirmTitle">Decline this demo?</div>
            <div class="confirm-desc" id="confirmDesc">This will mark "Midnight Drive" by Luna Ray as declined.</div>
            <div class="confirm-actions">
                <button class="confirm-btn cancel" id="confirmCancel">Cancel <span class="confirm-kbd">Esc</span></button>
                <button class="confirm-btn confirm-decline" id="confirmAction">Decline <span class="confirm-kbd">↵</span></button>
            </div>
        </div>
    </div>

    <!-- Artist popup -->
    <div class="artist-popup" id="artistPopup">
        <button class="artist-popup-close" id="artistPopupClose" title="Close (Esc)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
        <div class="artist-popup-header">
            <div class="artist-popup-avatar">
                <img src="Avatars/demmo-avatar-x1.webp" alt="" id="popupAvatar">
            </div>
            <div class="artist-popup-header-text">
                <div class="artist-popup-name" id="popupName">Luna Ray</div>
                <div class="artist-popup-genre" id="popupGenre">Electronic / Indie</div>
            </div>
            <button class="artist-msg-btn" title="Message artist">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
                Message
            </button>
        </div>
        <div class="artist-socials">
            <a class="social-link social-spotify" id="popupSpotify" target="_blank" title="Spotify">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
            </a>
            <a class="social-link social-instagram" id="popupInstagram" target="_blank" title="Instagram">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
            </a>
            <a class="social-link social-youtube" id="popupYoutube" target="_blank" title="YouTube">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
            </a>
            <a class="social-link social-soundcloud" id="popupSoundcloud" target="_blank" title="SoundCloud">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M1.175 12.225c-.017 0-.034.002-.05.005A.5.5 0 001 12.7v3.6c0 .276.225.5.5.5h.027c.276 0 .473-.224.473-.5V12.7a.5.5 0 00-.5-.5h-.325zm2.05-.8c-.017 0-.034.002-.05.005a.5.5 0 00-.45.495v4.8c0 .276.225.5.5.5h.027c.276 0 .473-.224.473-.5v-4.8a.5.5 0 00-.5-.5zm2.05.4c-.017 0-.034.002-.05.005a.5.5 0 00-.45.495v4.4c0 .276.225.5.5.5h.027c.276 0 .473-.224.473-.5v-4.4a.5.5 0 00-.5-.5zm2.05-1.2c-.017 0-.034.002-.05.005a.5.5 0 00-.45.495v5.6c0 .276.225.5.5.5h.027c.276 0 .473-.224.473-.5v-5.6a.5.5 0 00-.5-.5zm2.05-.8c-.017 0-.034.002-.05.005a.5.5 0 00-.45.495v6.4c0 .276.225.5.5.5h.027c.276 0 .473-.224.473-.5v-6.4a.5.5 0 00-.5-.5zm1.8-.6a4.5 4.5 0 00-1.5.256V17.3c0 .276.224.5.5.5h7.375A3.375 3.375 0 0020.5 14.5a3.375 3.375 0 00-3.375-3.375c-.08 0-.16.003-.238.008A4.5 4.5 0 0011.175 9.225z"/></svg>
            </a>
        </div>
        <div class="artist-popup-stats">
            <div class="artist-stat">
                <div class="artist-stat-value" id="popupSubmissions">3</div>
                <div class="artist-stat-label">Submissions</div>
            </div>
            <div class="artist-stat">
                <div class="artist-stat-value" id="popupAccepted">1</div>
                <div class="artist-stat-label">Accepted</div>
            </div>
            <div class="artist-stat">
                <div class="artist-stat-value" id="popupFirstSub">Jan 2026</div>
                <div class="artist-stat-label">First submission</div>
            </div>
            <div class="artist-stat">
                <div class="artist-stat-value" id="popupLastSub">Feb 2026</div>
                <div class="artist-stat-label">Latest</div>
            </div>
        </div>
    </div>

    <script>
        // ===== DEMO DATA =====
        const tracks = [
            { id: 1, status: 'new', track: 'Velvet Static', artist: 'Luna Ray', genre: 'Electronic', genreClass: 'genre-electronic', imprint: 'Colorize', date: 'Today', avatar: 'Avatars/demmo-avatar-x1.webp', audio: 'audio/run-marc-v-remix.mp3', priority: true, submissions: 3, accepted: 1, firstSub: 'Jan 2026', lastSub: 'Feb 2026', followers: 84500, socials: { spotify: 'https://open.spotify.com/artist/lunaray', instagram: 'https://instagram.com/lunaraymusic', youtube: 'https://youtube.com/@lunaray', soundcloud: 'https://soundcloud.com/lunaray' } },
            { id: 2, status: 'new', track: 'Slow Burn (Demo)', artist: 'NVDES', genre: 'Indie', genreClass: 'genre-indie', imprint: 'Enhanced Chill', date: 'Today', avatar: 'Avatars/demmo-avatar-x2.webp', audio: 'audio/momentum-extended-mix.mp3', priority: false, submissions: 1, accepted: 0, firstSub: 'Feb 2026', lastSub: 'Feb 2026', followers: 259000, socials: { spotify: 'https://open.spotify.com/artist/nvdes', instagram: 'https://instagram.com/nvdes', youtube: 'https://youtube.com/@nvdes', soundcloud: 'https://soundcloud.com/nvdes' } },
            { id: 3, status: 'new', track: 'Glass Hours', artist: 'Pale Waves', genre: 'Pop', genreClass: 'genre-pop', imprint: 'Enhanced Recordings', date: 'Yesterday', avatar: 'Avatars/demmo-avatar-x3.webp', audio: 'audio/chords-of-serenity.mp3', priority: false, submissions: 5, accepted: 2, firstSub: 'Nov 2025', lastSub: 'Feb 2026', followers: 1240000, socials: { spotify: 'https://open.spotify.com/artist/palewaves', instagram: 'https://instagram.com/palewaves', youtube: 'https://youtube.com/@palewaves', soundcloud: 'https://soundcloud.com/palewaves' } },
            { id: 4, status: 'new', track: 'Neon Undertow', artist: 'Soft Launch', genre: 'Electronic', genreClass: 'genre-electronic', imprint: 'Enhanced Progressive', date: 'Yesterday', avatar: 'Avatars/demmo-avatar-x4.webp', audio: 'audio/daydreaming.mp3', priority: false, submissions: 2, accepted: 0, firstSub: 'Dec 2025', lastSub: 'Feb 2026', followers: 31200, socials: { spotify: 'https://open.spotify.com/artist/softlaunch', instagram: 'https://instagram.com/softlaunchband', youtube: 'https://youtube.com/@softlaunch', soundcloud: 'https://soundcloud.com/softlaunch' } },
            { id: 5, status: 'new', track: 'Hollow Season', artist: 'MUNA', genre: 'Pop', genreClass: 'genre-pop', imprint: 'Colorize', date: '2 days ago', avatar: 'Avatars/demmo-avatar-x1.webp', audio: 'audio/machina.mp3', priority: false, submissions: 4, accepted: 1, firstSub: 'Oct 2025', lastSub: 'Feb 2026', followers: 612000, socials: { spotify: 'https://open.spotify.com/artist/muna', instagram: 'https://instagram.com/munatheband', youtube: 'https://youtube.com/@munatheband', soundcloud: 'https://soundcloud.com/munatheband' } },
            { id: 6, status: 'new', track: 'Drift (Unmastered)', artist: 'PREP', genre: 'R&B', genreClass: 'genre-rnb', imprint: 'Shapes of Solitude', date: '3 days ago', avatar: 'Avatars/demmo-avatar-x2.webp', audio: 'audio/abyss-original-mix.mp3', priority: false, submissions: 1, accepted: 0, firstSub: 'Feb 2026', lastSub: 'Feb 2026', followers: 178000, socials: { spotify: 'https://open.spotify.com/artist/prep', instagram: 'https://instagram.com/weareprepband', youtube: 'https://youtube.com/@prepband', soundcloud: 'https://soundcloud.com/weareprepband' } },
            { id: 7, status: 'new', track: 'Pale Meridian', artist: 'Still Woozy', genre: 'Indie', genreClass: 'genre-indie', imprint: 'Enhanced Chill', date: '4 days ago', avatar: 'Avatars/demmo-avatar-x3.webp', audio: 'audio/ambient-odyssey.mp3', priority: false, submissions: 7, accepted: 3, firstSub: 'Aug 2025', lastSub: 'Feb 2026', followers: 430000, socials: { spotify: 'https://open.spotify.com/artist/stillwoozy', instagram: 'https://instagram.com/stillwoozy', youtube: 'https://youtube.com/@stillwoozy', soundcloud: 'https://soundcloud.com/stillwoozy' } },
        ];

        let focusedIndex = 0;
        let playingId = null;
        let currentFilter = 'new';
        const trackList = document.getElementById('trackList');
        const emptyState = document.getElementById('emptyState');
        const toast = document.getElementById('toast');
        const confirmOverlay = document.getElementById('confirmOverlay');
        const artistPopup = document.getElementById('artistPopup');

        // ===== WAVEFORM (Canvas + Web Audio API) =====
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const waveformDataCache = {}; // trackId -> Float32Array of peaks

        // Gradient colors: pink/salmon (left) → purple/lavender (right)
        const WAVE_COLOR_STOPS = [
            { pos: 0,   r: 235, g: 140, b: 160 },  // warm pink
            { pos: 0.5, r: 220, g: 150, b: 200 },  // pink-purple
            { pos: 1,   r: 170, g: 140, b: 210 },  // lavender
        ];

        function waveGradientColor(t) {
            // t = 0..1 across width
            let i = 0;
            while (i < WAVE_COLOR_STOPS.length - 2 && WAVE_COLOR_STOPS[i + 1].pos < t) i++;
            const a = WAVE_COLOR_STOPS[i], b = WAVE_COLOR_STOPS[i + 1];
            const f = (t - a.pos) / (b.pos - a.pos);
            return {
                r: Math.round(a.r + (b.r - a.r) * f),
                g: Math.round(a.g + (b.g - a.g) * f),
                b: Math.round(a.b + (b.b - a.b) * f)
            };
        }

        // Generate fallback peaks (seeded random, looks organic)
        let _wfSeed = 1;
        function generateFallbackPeaks(numBars, trackId) {
            _wfSeed = (trackId || 1) * 9301 + 49297;
            function rand() { _wfSeed = (_wfSeed * 9301 + 49297) % 233280; return _wfSeed / 233280; }
            const peaks = new Float32Array(numBars);
            for (let i = 0; i < numBars; i++) {
                const base = 0.15 + rand() * 0.85;
                const env = Math.sin((i / numBars) * Math.PI) * 0.4 + 0.6;
                peaks[i] = Math.max(0.08, base * env);
            }
            return peaks;
        }

        async function decodeAudioPeaks(audioUrl, numBars) {
            const resp = await fetch(audioUrl);
            if (!resp.ok) throw new Error(`Fetch failed: ${resp.status}`);
            const arrayBuf = await resp.arrayBuffer();
            const audioBuf = await audioCtx.decodeAudioData(arrayBuf);
            const rawData = audioBuf.getChannelData(0); // mono or left channel
            const blockSize = Math.floor(rawData.length / numBars);
            const peaks = new Float32Array(numBars);
            for (let i = 0; i < numBars; i++) {
                let sum = 0;
                const start = i * blockSize;
                for (let j = 0; j < blockSize; j++) {
                    sum += Math.abs(rawData[start + j]);
                }
                peaks[i] = sum / blockSize;
            }
            // Normalize to 0..1
            const max = Math.max(...peaks) || 1;
            for (let i = 0; i < numBars; i++) peaks[i] = peaks[i] / max;
            return peaks;
        }

        function drawWaveform(canvas, peaks, playedPct) {
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.parentElement.getBoundingClientRect();
            const w = rect.width;
            const h = rect.height;
            if (w === 0 || h === 0) return; // hidden container
            canvas.width = w * dpr;
            canvas.height = h * dpr;
            const ctx = canvas.getContext('2d');
            ctx.scale(dpr, dpr);
            ctx.clearRect(0, 0, w, h);

            const numBars = peaks.length;
            const gap = 1.5;
            const barWidth = (w - gap * (numBars - 1)) / numBars;
            const playedBars = Math.floor((playedPct / 100) * numBars);

            for (let i = 0; i < numBars; i++) {
                const x = i * (barWidth + gap);
                const barH = Math.max(2, peaks[i] * h * 0.95);
                const y = h - barH;
                const t = i / numBars; // position across width
                const c = waveGradientColor(t);

                if (i < playedBars) {
                    // Played: full vivid gradient
                    ctx.fillStyle = `rgba(${c.r}, ${c.g}, ${c.b}, 0.9)`;
                } else {
                    // Unplayed: dim version
                    ctx.fillStyle = `rgba(${c.r}, ${c.g}, ${c.b}, 0.25)`;
                }

                // Draw rounded bar
                const radius = Math.min(barWidth / 2, 1.5);
                ctx.beginPath();
                ctx.moveTo(x + radius, y);
                ctx.lineTo(x + barWidth - radius, y);
                ctx.quadraticCurveTo(x + barWidth, y, x + barWidth, y + radius);
                ctx.lineTo(x + barWidth, y + barH - radius);
                ctx.quadraticCurveTo(x + barWidth, y + barH, x + barWidth - radius, y + barH);
                ctx.lineTo(x + radius, y + barH);
                ctx.quadraticCurveTo(x, y + barH, x, y + barH - radius);
                ctx.lineTo(x, y + radius);
                ctx.quadraticCurveTo(x, y, x + radius, y);
                ctx.fill();
            }
        }

        // Setup canvas elements in containers
        function ensureCanvas(containerId) {
            const container = document.getElementById(containerId);
            let canvas = container.querySelector('canvas');
            if (!canvas) {
                canvas = document.createElement('canvas');
                container.innerHTML = '';
                container.appendChild(canvas);
            }
            return canvas;
        }

        // Current waveform state
        let currentPeaks = null;      // bottom bar peaks
        let currentHeroPeaks = null;  // hero peaks
        let currentPlayedPct = 0;

        async function loadWaveformForTrack(trackId) {
            const t = tracks.find(tr => tr.id === trackId);
            if (!t) return;

            // Show generated fallback immediately so something is always visible
            currentPeaks = generateFallbackPeaks(200, trackId);
            currentHeroPeaks = generateFallbackPeaks(300, trackId);
            redrawWaveforms();

            // Then try to decode real audio data and upgrade
            try {
                if (audioCtx.state === 'suspended') await audioCtx.resume();
                const cacheKey = t.audio;
                if (!waveformDataCache[cacheKey]) {
                    waveformDataCache[cacheKey] = await decodeAudioPeaks(t.audio, 400);
                }
                const fullPeaks = waveformDataCache[cacheKey];
                currentPeaks = downsamplePeaks(fullPeaks, 200);
                currentHeroPeaks = downsamplePeaks(fullPeaks, 300);
                redrawWaveforms();
            } catch (e) {
                // Fallback already showing, just log
                console.warn('Waveform decode failed, using fallback:', e.message);
            }
        }

        function downsamplePeaks(source, target) {
            if (source.length === target) return source;
            const result = new Float32Array(target);
            const ratio = source.length / target;
            for (let i = 0; i < target; i++) {
                const start = Math.floor(i * ratio);
                const end = Math.floor((i + 1) * ratio);
                let max = 0;
                for (let j = start; j < end && j < source.length; j++) {
                    if (source[j] > max) max = source[j];
                }
                result[i] = max;
            }
            return result;
        }

        function redrawWaveforms() {
            if (currentPeaks) {
                const canvas = ensureCanvas('progressTrack');
                drawWaveform(canvas, currentPeaks, currentPlayedPct);
            }
            if (currentHeroPeaks) {
                const canvas = ensureCanvas('npHeroWaveform');
                drawWaveform(canvas, currentHeroPeaks, currentPlayedPct);
            }
        }

        function updateWaveformProgress(pct) {
            currentPlayedPct = pct;
            redrawWaveforms();
        }

        // Legacy compat stubs
        function renderWaveform(id) { loadWaveformForTrack(id); }
        function updateHeroWaveformProgress(pct) { /* handled by redrawWaveforms */ }
        function renderHeroWaveform(id) { /* handled by loadWaveformForTrack */ }

        // Init
        ensureCanvas('progressTrack');
        ensureCanvas('npHeroWaveform');

        // Redraw on resize
        window.addEventListener('resize', () => { redrawWaveforms(); });

        // ===== AUDIO ENGINE =====
        let audioEl = new Audio();
        audioEl.volume = 0.7;
        let progressRAF = null;

        function formatTime(sec) {
            if (isNaN(sec) || !isFinite(sec)) return '0:00';
            const m = Math.floor(sec / 60);
            const s = Math.floor(sec % 60);
            return `${m}:${s.toString().padStart(2, '0')}`;
        }

        function startProgressLoop() {
            cancelAnimationFrame(progressRAF);
            function tick() {
                if (playingId !== null && !audioEl.paused) {
                    const pct = audioEl.duration ? (audioEl.currentTime / audioEl.duration) * 100 : 0;
                    updateWaveformProgress(pct);
                    const timeLeft = document.querySelector('.np-time-current');
                    const timeRight = document.querySelector('.np-time-total');
                    if (timeLeft) timeLeft.textContent = formatTime(audioEl.currentTime);
                    if (timeRight) timeRight.textContent = formatTime(audioEl.duration);
                }
                progressRAF = requestAnimationFrame(tick);
            }
            tick();
        }

        audioEl.addEventListener('ended', () => {
            // Auto-advance to next track within the current filtered view
            const visible = tracks.filter(t => t.status === currentFilter);
            const idx = visible.findIndex(t => t.id === playingId);
            if (idx >= 0 && idx < visible.length - 1) {
                const nextTrack = visible[idx + 1];
                setFocus(idx + 1);
                togglePlay(nextTrack.id);
            } else {
                playingId = null;
                renderTracks();
                updateNPIcons();
                updateNPActions();
            }
        });

        // ===== FOLLOWERS FORMATTER =====
        function formatFollowers(n) {
            if (n >= 1000000) return (n / 1000000).toFixed(n % 1000000 === 0 ? 0 : 1).replace(/\.0$/, '') + 'M';
            if (n >= 1000) return (n / 1000).toFixed(n % 1000 === 0 ? 0 : 1).replace(/\.0$/, '') + 'K';
            return n.toString();
        }

        // ===== POPULARITY COLOR =====
        // Low → amber, mid → yellow-green, high → green
        function popularityColor(n, max) {
            const t = Math.pow(n / max, 0.5); // sqrt for nicer distribution
            // stops: 0 = amber, 0.5 = yellow-green, 1 = emerald
            const stops = [
                [194, 120,  56],  // amber-ish    (0%)
                [168, 174,  56],  // yellow-green  (50%)
                [ 74, 182, 112],  // emerald       (100%)
            ];
            const seg = t * (stops.length - 1);
            const i = Math.min(Math.floor(seg), stops.length - 2);
            const f = seg - i;
            const r = Math.round(stops[i][0] + (stops[i+1][0] - stops[i][0]) * f);
            const g = Math.round(stops[i][1] + (stops[i+1][1] - stops[i][1]) * f);
            const b = Math.round(stops[i][2] + (stops[i+1][2] - stops[i][2]) * f);
            return `rgb(${r},${g},${b})`;
        }

        // ===== RENDER TRACKS =====
        function renderTracks() {
            const visible = tracks.filter(t => t.status === currentFilter);
            const maxFollowers = Math.max(...tracks.map(t => t.followers || 0));
            if (visible.length === 0) {
                trackList.innerHTML = '';
                emptyState.classList.add('visible');
                return;
            }
            emptyState.classList.remove('visible');

            trackList.innerHTML = visible.map((t, i) => `
                <div class="track-row ${i === focusedIndex ? 'focused' : ''} ${playingId === t.id && !audioEl.paused ? 'playing' : ''}"
                     data-id="${t.id}" data-index="${i}">
                    <div class="track-info">
                        <div class="track-artwork">
                            <img src="${t.avatar}" alt="${t.artist}">
                            <button class="track-play-btn" data-action="play">
                                <svg class="play-icon" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                <svg class="pause-icon" fill="currentColor" viewBox="0 0 24 24"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/></svg>
                                <div class="playing-anim"><span></span><span></span><span></span><span></span></div>
                            </button>
                        </div>
                        <div class="track-text">
                            <div class="track-name">${t.track}</div>
                            <div class="track-artist-name" data-action="artist">${t.artist}</div>
                        </div>
                    </div>
                    <div class="track-popularity">
                        <span class="popularity-count" style="color:${popularityColor(t.followers || 0, maxFollowers)}">${formatFollowers(t.followers || 0)}</span>
                        <div class="popularity-bar-track">
                            <div class="popularity-bar-fill" style="width:${Math.round((t.followers || 0) / maxFollowers * 100)}%;background:${popularityColor(t.followers || 0, maxFollowers)}"></div>
                        </div>
                    </div>
                    <div><span class="genre-tag ${t.genreClass}">${t.genre}</span></div>
                    <div class="track-imprint">${t.imprint}</div>
                    <div class="track-date">${t.date}</div>
                    <div class="track-actions">
                        <button class="action-btn decline" data-action="decline" title="Decline (D)">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                            <span class="kbd">D</span>
                        </button>
                        <button class="action-btn shortlist" data-action="shortlist" title="Shortlist (S)">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>
                            <span class="kbd">S</span>
                        </button>
                        <button class="action-btn accept" data-action="accept" title="Accept (A)">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                            <span class="kbd">A</span>
                        </button>
                    </div>
                </div>
            `).join('');

            // Attach click handlers
            trackList.querySelectorAll('.track-row').forEach(row => {
                const id = parseInt(row.dataset.id);
                const index = parseInt(row.dataset.index);

                // Double click to play
                row.addEventListener('dblclick', (e) => {
                    if (e.target.closest('[data-action]')) return;
                    togglePlay(id);
                });

                // Single click to focus
                row.addEventListener('click', (e) => {
                    if (e.target.closest('[data-action]')) return;
                    setFocus(index);
                });

                // Play button
                row.querySelector('[data-action="play"]').addEventListener('click', (e) => {
                    e.stopPropagation();
                    togglePlay(id);
                });

                // Artist name click
                const artistEl = row.querySelector('[data-action="artist"]');
                if (artistEl) {
                    artistEl.addEventListener('click', (e) => {
                        e.stopPropagation();
                        showArtistPopup(id, e);
                    });
                }

                // Action buttons
                row.querySelector('[data-action="decline"]').addEventListener('click', (e) => {
                    e.stopPropagation();
                    showConfirm('decline', id);
                });
                row.querySelector('[data-action="shortlist"]').addEventListener('click', (e) => {
                    e.stopPropagation();
                    doAction('shortlist', id);
                });
                row.querySelector('[data-action="accept"]').addEventListener('click', (e) => {
                    e.stopPropagation();
                    showConfirm('accept', id);
                });
            });
        }

        // ===== FOCUS =====
        function setFocus(index) {
            const visible = tracks.filter(t => t.status === currentFilter);
            focusedIndex = Math.max(0, Math.min(index, visible.length - 1));
            renderTracks();
            scrollToFocused();
        }

        function scrollToFocused() {
            const row = trackList.querySelector(`.track-row[data-index="${focusedIndex}"]`);
            if (row) row.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
        }

        // ===== PLAY/PAUSE =====
        function togglePlay(id) {
            if (playingId === id && !audioEl.paused) {
                // Pause current track — keep playingId so resume works
                audioEl.pause();
            } else {
                // Resume AudioContext if suspended (browser policy)
                if (audioCtx.state === 'suspended') audioCtx.resume();
                const t = tracks.find(tr => tr.id === id);
                if (!t) return;

                if (playingId !== id) {
                    // Different track — load it fresh
                    audioEl.src = t.audio;
                    audioEl.load();
                    playingId = id;
                    updateNowPlaying(id);
                }
                // Resume or start
                audioEl.play().catch(() => {});
                if (playingId !== id) playingId = id;
                startProgressLoop();
            }
            // Sync focusedIndex so arrow keys always continue from this track
            const visible = tracks.filter(tr => tr.status === currentFilter);
            const idx = visible.findIndex(tr => tr.id === id);
            if (idx !== -1) focusedIndex = idx;
            renderTracks();
            updateNPIcons();
            updateNPActions();
        }

        function playPrev() {
            const visible = tracks.filter(t => t.status === currentFilter);
            const idx = visible.findIndex(t => t.id === playingId);
            if (idx > 0) {
                const prev = visible[idx - 1];
                setFocus(idx - 1);
                togglePlay(prev.id);
            }
        }

        function playNext() {
            const visible = tracks.filter(t => t.status === currentFilter);
            const idx = visible.findIndex(t => t.id === playingId);
            if (idx >= 0 && idx < visible.length - 1) {
                const next = visible[idx + 1];
                setFocus(idx + 1);
                togglePlay(next.id);
            }
        }

        function updateNowPlaying(id) {
            const t = tracks.find(tr => tr.id === id);
            if (!t) return;
            document.getElementById('npTrack').textContent = t.track;
            document.getElementById('npArtist').textContent = t.artist;
            document.getElementById('npArtwork').querySelector('img').src = t.avatar;
            // Update hero panel
            document.getElementById('npHeroTrack').textContent = t.track;
            document.getElementById('npHeroArtist').textContent = t.artist;
            document.getElementById('npHeroArt').src = t.avatar;
            // Load real waveform from audio data (both bar + hero)
            loadWaveformForTrack(id);
        }

        function updateHeroVisibility() {
            const hero = document.getElementById('npHero');
            if (playingId !== null && !audioEl.paused) {
                hero.classList.add('visible');
            } else {
                hero.classList.remove('visible');
            }
        }

        // ===== ACTIONS =====
        let pendingAction = null;

        function showConfirm(action, id) {
            const t = tracks.find(tr => tr.id === id);
            if (!t) return;
            pendingAction = { action, id };

            const title = document.getElementById('confirmTitle');
            const desc = document.getElementById('confirmDesc');
            const btn = document.getElementById('confirmAction');

            if (action === 'decline') {
                title.textContent = 'Decline this demo?';
                desc.textContent = `This will mark "${t.track}" by ${t.artist} as declined.`;
                btn.innerHTML = 'Decline <span class="confirm-kbd">↵</span>';
                btn.className = 'confirm-btn confirm-decline';
            } else if (action === 'accept') {
                title.textContent = 'Accept this demo?';
                desc.textContent = `This will accept "${t.track}" by ${t.artist} and move it to Accepted.`;
                btn.innerHTML = 'Accept <span class="confirm-kbd">↵</span>';
                btn.className = 'confirm-btn confirm-accept';
            }

            confirmOverlay.classList.add('visible');
        }

        function hideConfirm() {
            confirmOverlay.classList.remove('visible');
            pendingAction = null;
        }

        function doAction(action, id) {
            const t = tracks.find(tr => tr.id === id);
            if (!t) return;

            let message = '';
            let toastClass = '';

            if (action === 'decline') {
                t.status = 'declined';
                message = `Declined "${t.track}" by ${t.artist}`;
                toastClass = 'decline';
            } else if (action === 'shortlist') {
                t.status = 'shortlisted';
                message = `Shortlisted "${t.track}" by ${t.artist}`;
                toastClass = 'shortlist';
            } else if (action === 'accept') {
                t.status = 'accepted';
                message = `Accepted "${t.track}" by ${t.artist}`;
                toastClass = 'accept';
            }

            // If the acted-upon track was playing, pause and clear
            if (playingId === id) {
                audioEl.pause();
                playingId = null;
                updateNPIcons();
                updateNPActions();
            }

            // Clamp focusedIndex to new visible list length
            const visible = tracks.filter(tr => tr.status === currentFilter);
            if (focusedIndex >= visible.length) focusedIndex = Math.max(0, visible.length - 1);

            renderTracks();
            showToast(message, toastClass);
            updateCount();
        }

        function showToast(message, className) {
            toast.textContent = message;
            toast.className = `toast ${className}`;
            requestAnimationFrame(() => {
                toast.classList.add('visible');
            });
            setTimeout(() => toast.classList.remove('visible'), 2500);
        }

        function updateCount() {
            const newCount        = tracks.filter(t => t.status === 'new').length;
            const shortlistCount  = tracks.filter(t => t.status === 'shortlisted').length;
            const acceptedCount   = tracks.filter(t => t.status === 'accepted').length;
            const declinedCount   = tracks.filter(t => t.status === 'declined').length;

            // Page header count reflects current filter
            const filterCount = tracks.filter(t => t.status === currentFilter).length;
            const filterLabel = currentFilter === 'new' ? 'new'
                              : currentFilter === 'shortlisted' ? 'shortlisted'
                              : currentFilter === 'accepted' ? 'accepted'
                              : currentFilter === 'declined' ? 'declined'
                              : currentFilter;
            document.querySelector('.page-count').textContent = `${filterCount} ${filterLabel}`;

            // Sidebar nav counts
            const navAssign = document.getElementById('navCountAssign');
            const navShort  = document.getElementById('navCountShort');
            const navAccept = document.getElementById('navCountAccept');
            if (navAssign) navAssign.textContent = newCount;
            if (navShort)  navShort.textContent  = shortlistCount || '';
            if (navAccept) navAccept.textContent  = acceptedCount || '';
        }

        // ===== CONFIRM MODAL =====
        document.getElementById('confirmCancel').addEventListener('click', hideConfirm);
        document.getElementById('confirmAction').addEventListener('click', () => {
            if (pendingAction) {
                doAction(pendingAction.action, pendingAction.id);
                hideConfirm();
            }
        });
        confirmOverlay.addEventListener('click', (e) => {
            if (e.target === confirmOverlay) hideConfirm();
        });

        // ===== ARTIST POPUP =====
        function showArtistPopup(id, event) {
            const t = tracks.find(tr => tr.id === id);
            if (!t) return;

            document.getElementById('popupName').textContent = t.artist;
            document.getElementById('popupGenre').textContent = t.genre;
            document.getElementById('popupAvatar').src = t.avatar;
            document.getElementById('popupSubmissions').textContent = t.submissions;
            document.getElementById('popupAccepted').textContent = t.accepted;
            document.getElementById('popupFirstSub').textContent = t.firstSub;
            document.getElementById('popupLastSub').textContent = t.lastSub;
            document.getElementById('popupSpotify').href    = t.socials.spotify;
            document.getElementById('popupInstagram').href  = t.socials.instagram;
            document.getElementById('popupYoutube').href    = t.socials.youtube;
            document.getElementById('popupSoundcloud').href = t.socials.soundcloud;

            const rect = event.target.getBoundingClientRect();
            artistPopup.style.top = (rect.bottom + 8) + 'px';
            artistPopup.style.left = Math.min(rect.left, window.innerWidth - 300) + 'px';
            artistPopup.classList.add('visible');
        }

        document.getElementById('artistPopupClose').addEventListener('click', () => {
            artistPopup.classList.remove('visible');
        });

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.artist-popup') && !e.target.closest('[data-action="artist"]')) {
                artistPopup.classList.remove('visible');
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && artistPopup.classList.contains('visible')) {
                artistPopup.classList.remove('visible');
            }
        });

        // ===== KEYBOARD SHORTCUTS =====
        document.addEventListener('keydown', (e) => {
            // Ignore when modal is open (except Escape and Enter)
            if (confirmOverlay.classList.contains('visible')) {
                if (e.key === 'Escape') {
                    hideConfirm();
                    return;
                }
                if (e.key === 'Enter') {
                    e.preventDefault();
                    document.getElementById('confirmAction').click();
                    return;
                }
                return;
            }

            // Ignore if typing in an input
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

            const key = e.key.toLowerCase();

            if (key === 'arrowdown' || key === 'j') {
                e.preventDefault();
                setFocus(focusedIndex + 1);
            } else if (key === 'arrowup' || key === 'k') {
                e.preventDefault();
                setFocus(focusedIndex - 1);
            } else if (key === 'arrowleft') {
                e.preventDefault();
                if (audioEl.duration) audioEl.currentTime = Math.max(0, audioEl.currentTime - 15);
            } else if (key === 'arrowright') {
                e.preventDefault();
                if (audioEl.duration) audioEl.currentTime = Math.min(audioEl.duration, audioEl.currentTime + 15);
            } else if (key === ' ') {
                e.preventDefault();
                const visible = tracks.filter(tr => tr.status === currentFilter);
                const t = visible[focusedIndex];
                if (t) togglePlay(t.id);
            } else if (key === 'd') {
                e.preventDefault();
                const visible = tracks.filter(tr => tr.status === currentFilter);
                const t = visible[focusedIndex];
                if (t) showConfirm('decline', t.id);
            } else if (key === 's') {
                e.preventDefault();
                const visible = tracks.filter(tr => tr.status === currentFilter);
                const t = visible[focusedIndex];
                if (t) doAction('shortlist', t.id);
            } else if (key === 'a') {
                e.preventDefault();
                const visible = tracks.filter(tr => tr.status === currentFilter);
                const t = visible[focusedIndex];
                if (t) showConfirm('accept', t.id);
            }
        });

        // ===== IMPRINT SELECTOR =====
        document.getElementById('imprintBtn').addEventListener('click', (e) => {
            e.stopPropagation();
            document.getElementById('imprintDropdown').classList.toggle('open');
        });
        document.querySelectorAll('.imprint-option').forEach(opt => {
            opt.addEventListener('click', () => {
                document.querySelectorAll('.imprint-option').forEach(o => o.classList.remove('active'));
                opt.classList.add('active');
                const label = opt.textContent;
                document.getElementById('imprintCurrent').textContent = label;
                document.getElementById('imprintDropdown').classList.remove('open');
            });
        });
        document.addEventListener('click', () => {
            document.getElementById('imprintDropdown').classList.remove('open');
        });

        // ===== FILTER TABS =====
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentFilter = tab.dataset.filter;
                focusedIndex = 0;
                // Update empty state text to match current tab
                const label = tab.textContent.trim().toLowerCase();
                document.querySelector('.empty-title').textContent = `No ${label} demos`;
                document.querySelector('.empty-desc').textContent = `Demos you mark as "${label}" will appear here.`;
                renderTracks();
                updateCount();
            });
        });

        // ===== NOW-PLAYING BAR CONTROLS =====
        document.getElementById('npPlayPause').addEventListener('click', () => {
            const visible = tracks.filter(t => t.status === currentFilter);
            const targetId = playingId !== null ? playingId : (visible.length > 0 ? visible[focusedIndex]?.id : null);
            if (targetId !== null) togglePlay(targetId);
        });

        document.getElementById('npPrev').addEventListener('click', playPrev);
        document.getElementById('npNext').addEventListener('click', playNext);

        // Seek on progress bar click (bottom bar + hero)
        document.getElementById('progressTrack').addEventListener('click', (e) => {
            if (!audioEl.duration) return;
            const rect = e.currentTarget.getBoundingClientRect();
            const pct = (e.clientX - rect.left) / rect.width;
            audioEl.currentTime = pct * audioEl.duration;
        });
        document.getElementById('npHeroWaveform').addEventListener('click', (e) => {
            if (!audioEl.duration) return;
            const rect = e.currentTarget.getBoundingClientRect();
            const pct = (e.clientX - rect.left) / rect.width;
            audioEl.currentTime = pct * audioEl.duration;
        });

        // Volume slider
        document.getElementById('volumeTrack').addEventListener('click', (e) => {
            const rect = e.currentTarget.getBoundingClientRect();
            const pct = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
            audioEl.volume = pct;
            document.getElementById('volumeFill').style.width = (pct * 100) + '%';
        });

        // Update NP bar play/pause icon state
        function updateNPIcons() {
            const ppBtn = document.getElementById('npPlayPause');
            const playIcon = ppBtn.querySelector('.play-icon');
            const pauseIcon = ppBtn.querySelector('.pause-icon');
            if (playingId !== null && !audioEl.paused) {
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            } else {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }
        }

        // Show/hide bottom bar action strip
        const npActions = document.getElementById('npActions');
        const npShortcutsEl = document.getElementById('npShortcuts');

        function updateNPActions() {
            const playing = playingId !== null && !audioEl.paused;
            npActions.style.display = playing ? 'flex' : 'none';
            npShortcutsEl.style.display = playing ? 'none' : 'flex';
            updateHeroVisibility();
        }

        // Wire bottom-bar action buttons to current playing track
        document.getElementById('npDecline').addEventListener('click', () => {
            if (playingId !== null) showConfirm('decline', playingId);
        });
        document.getElementById('npShortlist').addEventListener('click', () => {
            if (playingId !== null) doAction('shortlist', playingId);
        });
        document.getElementById('npAccept').addEventListener('click', () => {
            if (playingId !== null) showConfirm('accept', playingId);
        });

        // Patch renderTracks to also update NP icons + action strip
        const _origRender = renderTracks;
        renderTracks = function() {
            _origRender();
            updateNPIcons();
            updateNPActions();
        };

        // ===== INIT =====
        renderTracks();
        startProgressLoop();
    </script>
</body>
</html>
